<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eco Home</title>
<style>
@font-face {
  font-family: 'BPGNino';
  src: url('./fonts/BPGNino.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}
* { box-sizing:border-box; margin:0; padding:0;  }
body { 
  background:  #328365; 
  padding-bottom: 80px;
  font-family: 'BPGNino', sans-serif; 
  position: relative;

}

.header-bg, .header-bg2 { position:absolute; height:220px; background:linear-gradient(135deg,#ceffd0 40%,#6fff77 100%); border-radius:50% 20%; z-index:-10; overflow:hidden; }
.header-bg { top:-100px; left:-900px; right:0; }
.header-bg2 { top:-130px; left:0; right:-300px; transform:rotate(15deg); opacity:0.7; z-index:-9; }
.header { display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:30px 15px 15px; }
.logo { width:200px;height:200px;border-radius:20px;background:#ffffff;display:flex;align-items:center;justify-content:center;margin-bottom:10px;box-shadow:0 4px 10px rgba(0,0,0,0.1);}
.header h1 { font-size:22px; font-weight:bold; color:#388e3c; background:#fff; padding:8px 20px; border-radius:10px; }
h2 { font-size:22px;font-weight:700;margin:20px 20px 10px;color:#ffffff; }
.card { display:flex; align-items:center; justify-content:space-between; background:linear-gradient(135deg,#ceffd0 40%,#84ff8a 100%); border-radius:15px; padding:15px; margin:0 20px 15px; box-shadow:0 2px 6px rgba(0,0,0,0.05); }
.card img { width:40px; height:40px; margin-right:15px; border-radius:8px; }
.card-content { flex:1;; }
.card-content h3 { font-size:15px; font-weight:600; margin-bottom:3px; color: #ffffff; width: 30%; } /* Fixed color from #ffffff to #333 */
.card-content p { font-size:13px; color:#777; }
.challenge-card { position:relative; background-size:cover; background-position:center; color:white; height:120px; display:flex; align-items:flex-end; justify-content:space-between; padding:10px 15px; border-radius:15px; margin:0 20px 15px; }
.challenge-card .points { background:yellow; color:black; padding:4px 10px; border-radius:20px; font-size:12px; font-weight:bold; }
.fixedbtn { position:fixed; top:30px; right:20px; width:40px; height:40px; background:rgba(21, 255, 0, 0.75); color:white; border-radius:10%; display:flex; align-items:center; justify-content:center; font-size:32px; box-shadow:0 2px 6px rgba(0,0,0,0.2); cursor:pointer; z-index:1000; }
.impact-card { background:#f9f9f9; border-radius:15px; padding:20px 20px; margin:20px auto; display:flex; flex-direction:row; align-items:center; justify-content:space-between; gap:15px; width:95%; text-align: left;}
.impact-card h2 { color:#388e3c; font-size:24px; margin-bottom:8px; }
.impact-card p { margin:4px 0; }
.impact-card p:first-of-type { font-weight:bold; font-size:16px; color:#222; }
.impact-card p:last-of-type { font-size:13px; color:#666; }
.impact-card img { width:120px; border-radius:10px; }
.bottom-nav { position:fixed; bottom:0; left:0; right:0; height:70px; background:white; display:flex; justify-content:space-around; align-items:center; border-top:1px solid #ddd; z-index:100; }
.bottom-nav img{ width:24px; height:24px; }
.nav-item { text-align:center; font-size:12px; color:#777; }
.nav-item a{
  text-decoration:none;
  color:inherit;
}

@media (max-width:480px){ .header h1{font-size:20px;} .logo{width:160px;height:160px;} .card-content h3{font-size:14px;} .card-content p{font-size:12px;} .impact-card{flex-direction:column;align-items:flex-start;gap:10px;} .impact-card img{width:100%; max-width:120px;} .bottom-nav{height:60px;} .nav-item{font-size:10px;} }
</style>
</head>
<body>

<div class="header-bg"></div>
<div class="fixedbtn">?</div>

<div class="header">
  <div class="logo"><img src="sheepp.png" alt="Logo" style="width:243px;height: auto; padding-bottom: 0;"></div>
  <h1>·Éò·Éõ·Éù·É•·Éõ·Éî·Éì·Éî ·É®·Éî·Éú·Éò ·Éõ·Éù·Éõ·Éê·Éï·Éö·Éò·É°·Éó·Éï·Éò·É°</h1>
</div>

<h2>new events</h2>
<div class="card">
  <img src="camp.png" alt="earth icon">
  <div class="card-content">
    <h3 style="color: #222; width: 50%;">new meeting in batumi(sun, 13:00)</h3>
    <p>will be discussed: travel, overpopulation, etc.</p>
  </div>
</div>

<h2>Today's challenge</h2>
  <a href="challenges.html" style="text-decoration: none;color: rgb(255, 255, 255);">
    <div class="challenge-card" style="background:linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('image.png');">
    <div class="card-content"><h3>I'm watching a film/documentary<br>about ecology</h3></div>
    <div class="points">+20 üíé</div>
    <button id="completeBtn" style="position:absolute; bottom:10px; right:10px; background:#4CAF50; color:white; border:none; padding:8px 12px; border-radius:8px; cursor:pointer;">Complete (+10 pts)</button>
    </div>
</a>

<h2>My friends & me</h2>
<a href="profile.html" style="text-decoration: none;color: black;">
    <div class="card" style="justify-content:flex-start;gap:15px;">
    <img src="group.png" alt="group icon" style="width:40px;height:40px;">
    <div class="card-content">
      <h3 style="color: #222;">Want to play in a group?</h3>
      <p>Create your group here! <span style="color:#f1b000;">‚ûî</span></p>
    </div>
  </div>
</a>

<div class="impact-card">
  <div style="flex:1;">
    <h2 >The impact of our community</h2>
    <p id="userPoints">Points: 0</p>
    <p>Equivalent to 2,185 Paris/New York flights avoided üòÅüòÅ</p>
  </div>
  <img src="hand-plant.png" alt="hand holding plant">
</div>

<div class="bottom-nav">
  <div class="nav-item"><a href="home.html"><img src="home.png" alt=""><br>Home</a></div>
  <div class="nav-item"><a href="challenges.html"><img src="challenges.png" alt=""><br>Challenges</a></div>
  <div class="nav-item"><a href="profile.html"><img src="profile.png" alt=""><br>Profile</a></div>
  <div class="nav-item"><a href="shop.html"><img src="chatbot.png" alt=""><br>shop</a></div>
</div>

<script>
let currentUser = JSON.parse(localStorage.getItem("currentUser"));
if(!currentUser){ 
  window.location.href="index.html"; 
} else {
  document.getElementById('welcomeMsg').textContent = `Hello, ${currentUser.username}!`;
  document.getElementById('userPoints').textContent = `Points: ${currentUser.points || 0}`;
}

// Complete challenge button
document.getElementById('completeBtn').addEventListener('click', ()=>{
  // Initialize points if they don't exist
  if (!currentUser.points) currentUser.points = 0;
  
  // Add points
  currentUser.points += 10;

  // Update localStorage currentUser
  localStorage.setItem("currentUser", JSON.stringify(currentUser));

  // Update in users array
  let users = JSON.parse(localStorage.getItem("users") || '[]');
  const idx = users.findIndex(u=>u.username===currentUser.username);
  if(idx>=0){ 
    users[idx].points = currentUser.points; 
    localStorage.setItem("users", JSON.stringify(users)); 
  }

  // Update points display
  document.getElementById('userPoints').textContent = `Points: ${currentUser.points}`;
  alert("Challenge completed! +10 points");
  
  // Disable button after completion
  document.getElementById('completeBtn').disabled = true;
  document.getElementById('completeBtn').textContent = "Completed";
  document.getElementById('completeBtn').style.background = "#ccc";
});
</script>

</body>
</html>