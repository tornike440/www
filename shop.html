<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leaf Coin Shop</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: Arial, sans-serif; }
    body { background: #264a3e; padding: 20px; padding-bottom: 80px; }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      background: #4caf50;
      color: #fff;
      padding: 10px 20px;
      border-radius: 10px;
    }

    .shop-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .item {
      background: #fff;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.15);
      text-align: center;
      transition: transform 0.2s;
    }

    .item:hover { transform: scale(1.05); }

    .item img {
      width: 100px;
      height: 100px;
      object-fit: contain;
      margin-bottom: 10px;
    }

    .item h3 { margin-bottom: 10px; font-size: 18px; }
    .item p { margin-bottom: 10px; color: #555; }

    .buy-btn {
      background: #4caf50;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .buy-btn:hover { background: #45a049; }

    .disabled {
      background: #ccc !important;
      cursor: not-allowed;
    }
    .fixedbtn {border: none; position:fixed; top:30px; right:20px; width:40px; height:40px; background:rgba(21, 255, 0, 0.75); color:white; border-radius:10%; display:flex; align-items:center; justify-content:center; font-size:32px; box-shadow:0 2px 6px rgba(0,0,0,0.2); cursor:pointer; z-index:1000; }


    .bottom-nav { position:fixed; bottom:0; left:0; right:0; height:70px; background:white; display:flex; justify-content:space-around; align-items:center; border-top:1px solid #ddd; z-index:100; }
    .nav-item { text-align:center; font-size:12px; color:#777; text-decoration:none; }
    .bottom-nav ul li{
        text-decoration:none;
    }
    .nav-item.active { color:#4CAF50; font-weight:bold; }
    .nav-item img { width:24px; height:24px; display:block; margin:0 auto 5px; }
  </style>
</head>
<body>
    <button class="fixedbtn">?</button>
  <header>
    <h2><img src="leaf.png" alt="" style="width:20px;height:20px;vertical-align:middle;"> Leaf Shop</h2>
    <div>Balance: <span id="balance">0</span> ðŸª™</div>
  </header>

  <div class="shop-container" id="shop"></div>


  
    <div class="bottom-nav">
    <div class="nav-item"><a href="home.html"><img src="home.png" alt=""><br>Home</a></div>
    <div class="nav-item"><a href="challenges.html"><img src="challenges.png" alt=""><br>Challenges</a></div>
    <div class="nav-item"><a href="profile.html"><img src="profile.png" alt=""><br>Profile</a></div>
    <div class="nav-item"><a href="shop.html"><img src="chatbot.png" alt=""><br>shop</a></div>
    </div>

  <script>
    // Load currentUser from localStorage
    let currentUser = JSON.parse(localStorage.getItem("currentUser"));
    if (!currentUser) {
      alert("No user logged in!");
      window.location.href = "index.html";
    }

    // Make sure points exists
    if (typeof currentUser.points === "undefined") {
      currentUser.points = 0;
    }

    // Display balance
    const balanceEl = document.getElementById("balance");
    balanceEl.textContent = currentUser.points;

    // Shop items with images and descriptions
    const items = [
      { id: 1, name: "Ice Tree", price: 20, img: "icetree.png", desc: "A rare leaf full of energy." },
      { id: 2, name: "Fire Tree", price: 50, img: "firetree.png", desc: "Show off your eco achievements." },
      { id: 3, name: "Cotton Tree", price: 75, img: "cottontree.png", desc: "Potion that restores nature." },
      { id: 4, name: "Egg Tree", price: 120, img: "eggtree.png", desc: "A crown for eco kings & queens." }
    ];

    const shopEl = document.getElementById("shop");

    function renderShop() {
      shopEl.innerHTML = "";
      items.forEach(item => {
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <img src="${item.img}" alt="${item.name}">
          <h3>${item.name}</h3>
          <p>${item.desc}</p>
          <p>Price: ${item.price} ðŸª™</p>
          <button class="buy-btn" id="buy-${item.id}">Buy</button>
        `;
        shopEl.appendChild(div);

        const btn = div.querySelector("button");
        if (currentUser.points < item.price) {
          btn.classList.add("disabled");
          btn.disabled = true;
        }
        btn.addEventListener("click", () => buyItem(item));
      });
    }

    function buyItem(item) {
      if (currentUser.points >= item.price) {
        currentUser.points -= item.price;
        localStorage.setItem("currentUser", JSON.stringify(currentUser));
        balanceEl.textContent = currentUser.points;
        alert(`You bought: ${item.name}!`);
        renderShop();
      } else {
        alert("Not enough points!");
      }
    }

    renderShop();
  </script>
</body>
</html>
