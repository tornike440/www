<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eco Login/Register</title>

<style>

  body { 
    font-family: 'Courier New', Courier, monospace; 
    background: 264a3e; 
    display:flex; 
    justify-content:center; 
    align-items:center; 
    height:100vh;
    background-color: #2c5044; 
  }
  .container { 
    display: flex;
    flex-direction: column;
    gap: 10px;
    background: #264a3e; 
    padding:20px; 
    border-radius:10px; 
    box-shadow:0 2px 10px rgba(118, 115, 115, 0.7); 
    width:300px; 
    text-align:center; 
  }
  input { 
    width:auto; 
    padding:8px; 
    margin:8px 0; 
    border-radius:5px; 
    border:1px solid #ccc; 
  }
  button { 
    padding:10px; 
    width:100%; 
    background:#4CAF50; 
    color:white; 
    border:none; 
    border-radius:5px; 
    cursor:pointer; 
  }
  .container h2{
    color: white;
  }
  button:hover { background:#45a049; }
</style>
</head>
<body>
<div class="container">
    <img src="logov2.png" alt="">
  <h2>Login/Register</h2>
  <input type="text" id="username" placeholder="Username">
  <input type="text" id="name" placeholder="Name">
  <input type="text" id="surname" placeholder="Surname">
  <input type="password" id="password" placeholder="Password">
  <button id="loginBtn">Login / Register</button>
</div>

<script>
document.getElementById('loginBtn').addEventListener('click', () => {
  const username = document.getElementById('username').value.trim();
  const name = document.getElementById('name').value.trim();
  const surname = document.getElementById('surname').value.trim();
  const password = document.getElementById('password').value.trim();

  if(!username || !name || !surname || !password) 
    return alert("Enter all fields");

  let users = JSON.parse(localStorage.getItem('users') || '[]');
  let user = users.find(u => u.username === username);

  if(user){
    // Check all details for login
    if(user.name === name && user.surname === surname && user.password === password){
        localStorage.setItem('currentUser', JSON.stringify(user));
        window.location.href = 'home.html';
        } else {
        alert("Details do not match any account");
        }
    } else {
        // New user registration with 0 points
        user = { username, name, surname, password, points: 0 };
        users.push(user);
        localStorage.setItem('users', JSON.stringify(users));
        localStorage.setItem('currentUser', JSON.stringify(user));
        window.location.href = 'home.html';
    }
    });
</script>
</body>
</html>
